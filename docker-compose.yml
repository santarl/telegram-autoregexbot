services:
  autoregexbot:
    build: .
    container_name: telegram-autoregexbot
    restart: unless-stopped
    
    # Mount config files and database for persistence
    volumes:
      - ./autoregexbot.cfg:/app/autoregexbot.cfg
      - ./secrets.cfg:/app/secrets.cfg
      - bot-data:/app/data

    # Change working dir or point DB to the volume path
    environment:
      - DB_PATH=/app/data/reminders.db

volumes:
  bot-data:
    
    # Optional: Pass token via ENV instead of secrets.cfg
    # environment:
    #   - BOT_TOKEN=your_token_here
    
    # Logging configuration (optional, limits log size)
    logging:
      driver: "json-file"
      options:
        max-size: "10m"
        max-file: "3"